<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Visualization with WJPr • WJPr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Visualization with WJPr">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WJPr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/dataviz.html">Data Visualization with WJPr</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ctoruno/WJPr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="dataviz_files/kePrint-0.0.1/kePrint.js"></script><link href="dataviz_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data Visualization with WJPr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ctoruno/WJPr/blob/main/vignettes/articles/dataviz.Rmd" class="external-link"><code>vignettes/articles/dataviz.Rmd</code></a></small>
      <div class="d-none name"><code>dataviz.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates how to use the data visualization
functions included in the <code>WJPr</code> package with a fictional
dataset called <code>GPP</code>, which is bundled with the package.
Version 1.0.0 of <code>WJPr</code> comes with ten plotting functions,
enabling the creation of the following chart types:</p>
<ol style="list-style-type: decimal">
<li>Bar (Horizontal/Vertical/Stacked)</li>
<li>Diverging Bars</li>
<li>Lines</li>
<li>Slopes</li>
<li>Dots (with error bars)</li>
<li>Dumbbells</li>
<li>Radar</li>
<li>Rose</li>
<li>Edgebars</li>
<li>Gauge</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get(paste0(generic, ".", class), envir = get_method_env()) : </span></span>
<span><span class="co">#&gt;   object 'type_sum.accel' not found</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org" class="external-link">haven</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ctoruno/WJPr" class="external-link">WJPr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Always load the WJP fonts if not passing a custom theme to function</span></span>
<span><span class="fu">wjp_fonts</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Loading data</span></span>
<span><span class="va">gpp_data</span> <span class="op">&lt;-</span> <span class="fu">WJPr</span><span class="fu">::</span><span class="va"><a href="../reference/gpp.html">gpp</a></span></span></code></pre></div>
<div class="section level2">
<h2 id="bar-chart">Bar Chart<a class="anchor" aria-label="anchor" href="#bar-chart"></a>
</h2>
<div class="section level3">
<h3 id="preparing-the-data">Preparing the data<a class="anchor" aria-label="anchor" href="#preparing-the-data"></a>
</h3>
<p>To begin, we will plot a simple vertical bar chart. For the
<code>GPP</code> dataset, a common use case involves visualizing the
percentage of responses across different groups of respondents. In this
example, we will plot the percentage of respondents in each country who
have “a lot” or “some” trust in Institution A. This is calculated as the
percentage of people who answered 1 or 2 to question Q1A. The first step
is to wrangle the data accordingly:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4bars</span> <span class="op">&lt;-</span> <span class="va">gpp_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">q1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    q1a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="va">q1a</span><span class="op">)</span>,</span>
<span>    trust <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">q1a</span> <span class="op">&lt;=</span> <span class="fl">2</span>  <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">&lt;=</span> <span class="fl">4</span>  <span class="op">~</span> <span class="fl">0</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">==</span> <span class="fl">99</span> <span class="op">~</span> <span class="cn">NA_real_</span></span>
<span>    <span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    trust   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">trust</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"keep"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    trust <span class="op">=</span> <span class="va">trust</span><span class="op">*</span><span class="fl">100</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="st">"2022"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="va">data4bars</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:right;">
trust
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
2022
</td>
<td style="text-align:right;">
49.09091
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
2022
</td>
<td style="text-align:right;">
45.65217
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
2022
</td>
<td style="text-align:right;">
63.63636
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="simple-vertical-chart">Simple vertical chart<a class="anchor" aria-label="anchor" href="#simple-vertical-chart"></a>
</h3>
<p>Once the data is prepared, we can create a basic vertical bar chart
using the <code><a href="../reference/wjp_bars.html">wjp_bars()</a></code> function. You only need to specify the
names of the columns that contain the values to be plotted on the Y-axis
(<code>target</code>) and the categories to be displayed on the X-axis
(<code>grouping</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_bars.html">wjp_bars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4bars</span>,              </span>
<span>    target    <span class="op">=</span> <span class="st">"trust"</span>,        </span>
<span>    grouping  <span class="op">=</span> <span class="st">"country"</span>    </span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-4-1.png" width="150%"></p>
</div>
<div class="section level3">
<h3 id="controlling-color">Controlling color<a class="anchor" aria-label="anchor" href="#controlling-color"></a>
</h3>
<p>Colors can be customized using the <code>colors</code> and
<code>cvec</code> parameters. The <code>colors</code> parameter
specifies the column used to distinguish color groups, while
<code>cvec</code> is a named vector that maps specific values to
specific colors. For example, to give all bars a consistent cool gray
color, we can use the “year” column for <code>colors</code> and map the
year “2002” to the color code “#8789C0”.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_bars.html">wjp_bars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4bars</span>,              </span>
<span>    target    <span class="op">=</span> <span class="st">"trust"</span>,        </span>
<span>    grouping  <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    colors    <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2022"</span> <span class="op">=</span> <span class="st">"#8789C0"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-5-1.png" width="150%"></p>
<p>If you prefer to assign a unique color to each country, you’ll need
to create a new column because the <code>grouping</code> parameter is
already using the “country” column. In the example below, we create a
new column called “color_variable” with the same values as the “country”
column:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4bars</span> <span class="op">&lt;-</span> <span class="va">data4bars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    color_variable <span class="op">=</span> <span class="va">country</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wjp_bars.html">wjp_bars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4bars</span>,              </span>
<span>    target    <span class="op">=</span> <span class="st">"trust"</span>,        </span>
<span>    grouping  <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    colors    <span class="op">=</span> <span class="st">"color_variable"</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="st">"#2E4057"</span>,</span>
<span>                  <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="st">"#083D77"</span>,</span>
<span>                  <span class="st">"Neverland"</span> <span class="op">=</span> <span class="st">"#F4D35E"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-6-1.png" width="150%"></p>
</div>
<div class="section level3">
<h3 id="adding-value-labels">Adding value labels<a class="anchor" aria-label="anchor" href="#adding-value-labels"></a>
</h3>
<p>To add value labels to the bars, use the <code>labels</code> and
<code>lab_pos</code> parameters. The <code>labels</code> parameter
specifies the column containing the label values, while
<code>lab_pos</code> determines the position of the labels. Since the
<code>target</code> column may contain values with many decimals, it’s
common to create a separate column for rounded labels. In this example,
we create two new columns, <code>value_label</code> and
<code>label_position</code>, placing the labels 5 percentage points
above the tops of the bars:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4bars</span> <span class="op">&lt;-</span> <span class="va">data4bars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    value_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">trust</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>        nsmall <span class="op">=</span> <span class="fl">0</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="st">"%"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    label_position <span class="op">=</span> <span class="va">trust</span> <span class="op">+</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wjp_bars.html">wjp_bars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4bars</span>,              </span>
<span>    target    <span class="op">=</span> <span class="st">"trust"</span>,        </span>
<span>    grouping  <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    labels    <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    lab_pos   <span class="op">=</span> <span class="st">"label_position"</span>,</span>
<span>    colors    <span class="op">=</span> <span class="st">"color_variable"</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="st">"#2E4057"</span>,</span>
<span>                  <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="st">"#083D77"</span>,</span>
<span>                  <span class="st">"Neverland"</span> <span class="op">=</span> <span class="st">"#F4D35E"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-7-1.png" width="150%"></p>
</div>
<div class="section level3">
<h3 id="switch-to-horizontal-bars">Switch to horizontal bars<a class="anchor" aria-label="anchor" href="#switch-to-horizontal-bars"></a>
</h3>
<p>By default, the bars are plotted vertically. However, switching to
horizontal bars is as simple as setting the <code>direction</code>
parameter to “horizontal”.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_bars.html">wjp_bars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4bars</span>,              </span>
<span>    target    <span class="op">=</span> <span class="st">"trust"</span>,        </span>
<span>    grouping  <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    labels    <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    lab_pos   <span class="op">=</span> <span class="st">"label_position"</span>,</span>
<span>    colors    <span class="op">=</span> <span class="st">"color_variable"</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="st">"#2E4057"</span>,</span>
<span>                  <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="st">"#083D77"</span>,</span>
<span>                  <span class="st">"Neverland"</span> <span class="op">=</span> <span class="st">"#F4D35E"</span><span class="op">)</span>,</span>
<span>    direction <span class="op">=</span> <span class="st">"horizontal"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-8-1.png" width="150%"></p>
</div>
</div>
<div class="section level2">
<h2 id="stacked-bars-chart">Stacked Bars Chart<a class="anchor" aria-label="anchor" href="#stacked-bars-chart"></a>
</h2>
<p>The <code><a href="../reference/wjp_bars.html">wjp_bars()</a></code> function can also be used to create
stacked bar charts. For instance, instead of plotting the percentage of
respondents who have “a lot” or “some” trust in Institution A, we can
visualize the percentage distribution for all possible responses in each
country. First, we modify the data to reflect this new design:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4bars</span> <span class="op">&lt;-</span> <span class="va">gpp_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">year</span> <span class="op">==</span> <span class="fl">2022</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">q1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    q1a  <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">q1a</span> <span class="op">==</span> <span class="fl">1</span>  <span class="op">~</span> <span class="st">"A lot"</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">==</span> <span class="fl">2</span>  <span class="op">~</span> <span class="st">"Some"</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">==</span> <span class="fl">3</span>  <span class="op">~</span> <span class="st">"Little"</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">==</span> <span class="fl">4</span>  <span class="op">~</span> <span class="st">"None"</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">==</span> <span class="fl">99</span> <span class="op">~</span> <span class="st">"No answer"</span>,</span>
<span>    <span class="op">)</span>,</span>
<span>    q1a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>      <span class="va">q1a</span>, </span>
<span>      levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A lot"</span>, <span class="st">"Some"</span>, <span class="st">"Little"</span>, <span class="st">"None"</span>, <span class="st">"No answer"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">q1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">country</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">q1a</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    total       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>    percentage  <span class="op">=</span> <span class="op">(</span><span class="va">n</span><span class="op">/</span><span class="va">total</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,</span>
<span>    value_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">percentage</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>        nsmall <span class="op">=</span> <span class="fl">1</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="st">"%"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    value_label <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">percentage</span> <span class="op">&gt;=</span> <span class="fl">5</span>, <span class="va">value_label</span>, <span class="cn">NA_character_</span><span class="op">)</span>,</span>
<span>    label_position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">percentage</span><span class="op">)</span><span class="op">-</span><span class="op">(</span><span class="va">percentage</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">country</span>, <span class="va">q1a</span>, <span class="va">percentage</span>, <span class="va">value_label</span>, <span class="va">label_position</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="va">data4bars</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
q1a
</th>
<th style="text-align:right;">
percentage
</th>
<th style="text-align:left;">
value_label
</th>
<th style="text-align:right;">
label_position
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
No answer
</td>
<td style="text-align:right;">
3.508772
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1.7543860
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
None
</td>
<td style="text-align:right;">
14.035088
</td>
<td style="text-align:left;">
14.0%
</td>
<td style="text-align:right;">
10.5263158
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
Little
</td>
<td style="text-align:right;">
35.087719
</td>
<td style="text-align:left;">
35.1%
</td>
<td style="text-align:right;">
35.0877193
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
Some
</td>
<td style="text-align:right;">
28.070175
</td>
<td style="text-align:left;">
28.1%
</td>
<td style="text-align:right;">
66.6666667
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
A lot
</td>
<td style="text-align:right;">
19.298246
</td>
<td style="text-align:left;">
19.3%
</td>
<td style="text-align:right;">
90.3508772
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
None
</td>
<td style="text-align:right;">
19.565217
</td>
<td style="text-align:left;">
19.6%
</td>
<td style="text-align:right;">
9.7826087
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
Little
</td>
<td style="text-align:right;">
34.782609
</td>
<td style="text-align:left;">
34.8%
</td>
<td style="text-align:right;">
36.9565217
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
Some
</td>
<td style="text-align:right;">
28.260870
</td>
<td style="text-align:left;">
28.3%
</td>
<td style="text-align:right;">
68.4782609
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
A lot
</td>
<td style="text-align:right;">
17.391304
</td>
<td style="text-align:left;">
17.4%
</td>
<td style="text-align:right;">
91.3043478
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
No answer
</td>
<td style="text-align:right;">
1.785714
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.8928571
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
None
</td>
<td style="text-align:right;">
12.500000
</td>
<td style="text-align:left;">
12.5%
</td>
<td style="text-align:right;">
8.0357143
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
Little
</td>
<td style="text-align:right;">
23.214286
</td>
<td style="text-align:left;">
23.2%
</td>
<td style="text-align:right;">
25.8928571
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
Some
</td>
<td style="text-align:right;">
42.857143
</td>
<td style="text-align:left;">
42.9%
</td>
<td style="text-align:right;">
58.9285714
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
A lot
</td>
<td style="text-align:right;">
19.642857
</td>
<td style="text-align:left;">
19.6%
</td>
<td style="text-align:right;">
90.1785714
</td>
</tr>
</tbody>
</table>
<p>Notice that we transform the q1a column into a factor variable and
define the specific levels (order) of responses. Specifying factor
levels allows us to control how the answers are displayed in the chart.
If we don’t define the factor levels, the responses will default to
alphabetical order, which may not align with the intended order of this
ordinal variable.</p>
<p>Once the data is ready, we can use the <code><a href="../reference/wjp_bars.html">wjp_bars()</a></code>
function again, this time setting the <code>stacked</code> parameter to
“TRUE”:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stacked_bar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wjp_bars.html">wjp_bars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4bars</span>,              </span>
<span>    target    <span class="op">=</span> <span class="st">"percentage"</span>,        </span>
<span>    grouping  <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    labels    <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    lab_pos   <span class="op">=</span> <span class="st">"label_position"</span>,</span>
<span>    colors    <span class="op">=</span> <span class="st">"q1a"</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A lot"</span>     <span class="op">=</span> <span class="st">"#32382E"</span>,</span>
<span>                  <span class="st">"Some"</span>      <span class="op">=</span> <span class="st">"#899878"</span>,</span>
<span>                  <span class="st">"Little"</span>    <span class="op">=</span> <span class="st">"#E4E6C3"</span>,</span>
<span>                  <span class="st">"None"</span>      <span class="op">=</span> <span class="st">"#BF4342"</span>,</span>
<span>                  <span class="st">"No answer"</span> <span class="op">=</span> <span class="st">"#858585"</span><span class="op">)</span>,</span>
<span>    direction <span class="op">=</span> <span class="st">"horizontal"</span>,</span>
<span>    stacked   <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">stacked_bar</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-10-1.png" width="150%"></p>
</div>
<div class="section level2">
<h2 id="diverging-bars-chart">Diverging Bars Chart<a class="anchor" aria-label="anchor" href="#diverging-bars-chart"></a>
</h2>
<p>Diverging bar charts are a variation of standard bar charts that use
both the positive and negative sides of the Cartesian plane to display
information. For example, let’s revisit our earlier case where we
plotted levels of trust in Institution A. With diverging bars, we can
plot the percentage of respondents who answered “A lot” and “Some” on
one side, and the percentage of respondents who answered “Little” and
“None” on the other. To achieve this, we first need to wrangle the data
slightly differently:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4divbars</span> <span class="op">&lt;-</span> <span class="va">gpp_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">year</span> <span class="op">==</span> <span class="fl">2022</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">q1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    q1a  <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">q1a</span> <span class="op">&lt;=</span> <span class="fl">2</span>  <span class="op">~</span> <span class="st">"Trust"</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">&lt;=</span> <span class="fl">4</span>  <span class="op">~</span> <span class="st">"No Trust"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">q1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">q1a</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    total       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>    percentage  <span class="op">=</span> <span class="op">(</span><span class="va">n</span><span class="op">/</span><span class="va">total</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,</span>
<span>    value_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">percentage</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>        nsmall <span class="op">=</span> <span class="fl">1</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="st">"%"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    value_label    <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">percentage</span> <span class="op">&gt;=</span> <span class="fl">5</span>, </span>
<span>                             <span class="va">value_label</span>, </span>
<span>                             <span class="cn">NA_character_</span><span class="op">)</span>,</span>
<span>    direction      <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">q1a</span> <span class="op">==</span> <span class="st">"Trust"</span>, </span>
<span>                             <span class="st">"positive"</span>, </span>
<span>                             <span class="st">"negative"</span><span class="op">)</span>,</span>
<span>    percentage     <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">direction</span> <span class="op">==</span> <span class="st">"negative"</span>, </span>
<span>                             <span class="va">percentage</span><span class="op">*</span><span class="op">-</span><span class="fl">1</span>, </span>
<span>                             <span class="va">percentage</span><span class="op">)</span>,</span>
<span>    label_position <span class="op">=</span> <span class="op">(</span><span class="va">percentage</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">country</span>, <span class="va">q1a</span>, <span class="va">percentage</span>, <span class="va">value_label</span>, <span class="va">label_position</span>, <span class="va">direction</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="va">data4divbars</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
q1a
</th>
<th style="text-align:right;">
percentage
</th>
<th style="text-align:left;">
value_label
</th>
<th style="text-align:right;">
label_position
</th>
<th style="text-align:left;">
direction
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
No Trust
</td>
<td style="text-align:right;">
-50.90909
</td>
<td style="text-align:left;">
50.9%
</td>
<td style="text-align:right;">
-25.45455
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
Trust
</td>
<td style="text-align:right;">
49.09091
</td>
<td style="text-align:left;">
49.1%
</td>
<td style="text-align:right;">
24.54545
</td>
<td style="text-align:left;">
positive
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
No Trust
</td>
<td style="text-align:right;">
-54.34783
</td>
<td style="text-align:left;">
54.3%
</td>
<td style="text-align:right;">
-27.17391
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
Trust
</td>
<td style="text-align:right;">
45.65217
</td>
<td style="text-align:left;">
45.7%
</td>
<td style="text-align:right;">
22.82609
</td>
<td style="text-align:left;">
positive
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
No Trust
</td>
<td style="text-align:right;">
-36.36364
</td>
<td style="text-align:left;">
36.4%
</td>
<td style="text-align:right;">
-18.18182
</td>
<td style="text-align:left;">
negative
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
Trust
</td>
<td style="text-align:right;">
63.63636
</td>
<td style="text-align:left;">
63.6%
</td>
<td style="text-align:right;">
31.81818
</td>
<td style="text-align:left;">
positive
</td>
</tr>
</tbody>
</table>
<p>Diverging bar charts are a variation of standard bar charts that use
both the positive and negative sides of the Cartesian plane to display
information. For example, let’s revisit our earlier case where we
plotted levels of trust in Institution A. With diverging bars, we can
plot the percentage of respondents who answered “A lot” and “Some” on
one side, and the percentage of respondents who answered “Little” and
“None” on the other. To achieve this, we first need to wrangle the data
slightly differently:</p>
<p>Pay close attention to how we create a new variable,
<code>direction</code>, to specify the direction in which the values
should be plotted. Values associated with a “negative” direction are
converted into negative numbers.</p>
<p>Once the data is prepared, we can use the <code><a href="../reference/wjp_divbars.html">wjp_divbars()</a></code>
function to create the chart. Several parameters are used in the same
way as in the wjp_bars() function:</p>
<ul>
<li>
<code>target</code>: Specifies the column containing the values to
be plotted.</li>
<li>
<code>grouping</code>: Specifies the column containing the
categorical groupings.</li>
<li>
<code>cvec</code>: Contains a named vector that links specific
values to color codes.</li>
<li>
<code>labels</code>: Specifies the column containing the value
labels to display (optional).</li>
</ul>
<p>In addition to these familiar parameters, the
<code><a href="../reference/wjp_divbars.html">wjp_divbars()</a></code> function has two unique parameters essential
for diverging bar charts:</p>
<ul>
<li>
<code>diverging</code>: Specifies the column name that identifies
the direction of the values (positive or negative).</li>
<li>
<code>negative</code>: Specifies the value in the diverging column
that indicates negative values.</li>
</ul>
<p>By combining these parameters, the <code><a href="../reference/wjp_divbars.html">wjp_divbars()</a></code>
function allows for clear and effective visualization of contrasting
groups within the data.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_divbars.html">wjp_divbars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4divbars</span>,             </span>
<span>    target      <span class="op">=</span> <span class="st">"percentage"</span>,       </span>
<span>    grouping    <span class="op">=</span> <span class="st">"country"</span>,         </span>
<span>    diverging   <span class="op">=</span> <span class="st">"q1a"</span>,     </span>
<span>    negative    <span class="op">=</span> <span class="st">"negative"</span>,   </span>
<span>    cvec        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Trust"</span>     <span class="op">=</span> <span class="st">"#4F518C"</span>,</span>
<span>                    <span class="st">"No Trust"</span>  <span class="op">=</span> <span class="st">"#2C2A4A"</span><span class="op">)</span>,</span>
<span>    labels      <span class="op">=</span> <span class="st">"value_label"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-12-1.png" width="150%"></p>
</div>
<div class="section level2">
<h2 id="line-chart">Line Chart<a class="anchor" aria-label="anchor" href="#line-chart"></a>
</h2>
<p>Line charts are a great way to display the evolution of values over
time. The <code><a href="../reference/wjp_lines.html">wjp_lines()</a></code> function allows you to create line
charts with ease. Let’s assume we want to examine the percentage of
people who have “a lot” or “some” trust in Institution A in Atlantis
over time. To begin, we need to wrangle the data to match this
design:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4lines</span> <span class="op">&lt;-</span> <span class="va">gpp_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">country</span> <span class="op">==</span> <span class="st">"Atlantis"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">q1a</span>, <span class="va">q1b</span>, <span class="va">q1c</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="op">!</span><span class="va">year</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="op">!</span><span class="va">year</span>,</span>
<span>      <span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>        <span class="va">.x</span> <span class="op">&lt;=</span> <span class="fl">2</span>  <span class="op">~</span> <span class="fl">1</span>,</span>
<span>        <span class="va">.x</span> <span class="op">&lt;=</span> <span class="fl">4</span>  <span class="op">~</span> <span class="fl">0</span>,</span>
<span>        <span class="va">.x</span> <span class="op">==</span> <span class="fl">99</span> <span class="op">~</span> <span class="cn">NA_real_</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"keep"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">*</span><span class="fl">100</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="va">year</span>,</span>
<span>    names_to  <span class="op">=</span> <span class="st">"variable"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"percentage"</span> </span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    institution <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1a"</span> <span class="op">~</span> <span class="st">"Institution A"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1b"</span> <span class="op">~</span> <span class="st">"Institution B"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1c"</span> <span class="op">~</span> <span class="st">"Institution C"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    value_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">percentage</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>        nsmall <span class="op">=</span> <span class="fl">0</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="st">"%"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="va">data4lines</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
year
</th>
<th style="text-align:left;">
variable
</th>
<th style="text-align:right;">
percentage
</th>
<th style="text-align:left;">
institution
</th>
<th style="text-align:left;">
value_label
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
62.39316
</td>
<td style="text-align:left;">
Institution A
</td>
<td style="text-align:left;">
62%
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
43.85965
</td>
<td style="text-align:left;">
Institution B
</td>
<td style="text-align:left;">
44%
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
40.00000
</td>
<td style="text-align:left;">
Institution C
</td>
<td style="text-align:left;">
40%
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
63.51351
</td>
<td style="text-align:left;">
Institution A
</td>
<td style="text-align:left;">
64%
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
42.46575
</td>
<td style="text-align:left;">
Institution B
</td>
<td style="text-align:left;">
42%
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
44.44444
</td>
<td style="text-align:left;">
Institution C
</td>
<td style="text-align:left;">
44%
</td>
</tr>
<tr>
<td style="text-align:left;">
2022
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
49.09091
</td>
<td style="text-align:left;">
Institution A
</td>
<td style="text-align:left;">
49%
</td>
</tr>
<tr>
<td style="text-align:left;">
2022
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
32.14286
</td>
<td style="text-align:left;">
Institution B
</td>
<td style="text-align:left;">
32%
</td>
</tr>
<tr>
<td style="text-align:left;">
2022
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
35.71429
</td>
<td style="text-align:left;">
Institution C
</td>
<td style="text-align:left;">
36%
</td>
</tr>
</tbody>
</table>
<p>Note that we are also retaining data on trust in Institution B and
Institution C, and we are pivoting the dataset to a long format.
However, for simplicity, we will start by plotting only the percentage
of people who trust Institution A over time. We can achieve this with
the <code><a href="../reference/wjp_lines.html">wjp_lines()</a></code> function. Many of the parameters work
similarly to those in other functions:</p>
<ul>
<li>
<code>target</code>: Specifies the column containing the values to
be plotted on the Y-axis.</li>
<li>
<code>grouping</code>: Specifies the column containing the
categorical groupings. For most line charts, this is the year or time
variable.</li>
<li>
<code>colors</code>: Specifies the column used to distinguish
different colors for the lines.</li>
<li>
<code>cvec</code>: Contains a named vector mapping specific values
to their corresponding color codes.</li>
<li>
<code>labels</code>: Specifies the column containing value labels to
display, if any.</li>
</ul>
<p>Additionally, the <code><a href="../reference/wjp_lines.html">wjp_lines()</a></code> function requires the
ngroups parameter to define the number of groups. Here’s how to set
it:</p>
<ol style="list-style-type: decimal">
<li>For a single line: If plotting only one line, as in the example
below, set ngroups = 1.</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_lines.html">wjp_lines</a></span><span class="op">(</span></span>
<span>    <span class="va">data4lines</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution A"</span><span class="op">)</span>,                    </span>
<span>    target         <span class="op">=</span> <span class="st">"percentage"</span>,             </span>
<span>    grouping       <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    ngroups        <span class="op">=</span> <span class="fl">1</span>,                 </span>
<span>    colors         <span class="op">=</span> <span class="st">"institution"</span>,</span>
<span>    cvec           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Institution A"</span> <span class="op">=</span> <span class="st">"#08605F"</span><span class="op">)</span>,</span>
<span>    labels         <span class="op">=</span> <span class="st">"value_label"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-14-1.png" width="150%"></p>
<ol start="2" style="list-style-type: decimal">
<li>For multiple lines: When plotting multiple lines, specify the column
containing the group identifiers. In this case, also consider setting
repel = TRUE to prevent overlapping value labels. Note that the ggrepel
package must be loaded for this feature to work.</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggrepel.slowkow.com/" class="external-link">ggrepel</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/wjp_lines.html">wjp_lines</a></span><span class="op">(</span></span>
<span>    <span class="va">data4lines</span>,                    </span>
<span>    target         <span class="op">=</span> <span class="st">"percentage"</span>,             </span>
<span>    grouping       <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    ngroups        <span class="op">=</span> <span class="va">data4lines</span><span class="op">$</span><span class="va">institution</span>,                 </span>
<span>    colors         <span class="op">=</span> <span class="st">"institution"</span>,</span>
<span>    cvec           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Institution A"</span> <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                       <span class="st">"Institution B"</span> <span class="op">=</span> <span class="st">"#9E6240"</span>,</span>
<span>                       <span class="st">"Institution C"</span> <span class="op">=</span> <span class="st">"#2E0E02"</span><span class="op">)</span>,</span>
<span>    labels         <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    repel          <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-15-1.png" width="150%"></p>
<div class="section level3">
<h3 id="controlling-opacities">Controlling opacities<a class="anchor" aria-label="anchor" href="#controlling-opacities"></a>
</h3>
<p>The <code><a href="../reference/wjp_lines.html">wjp_lines()</a></code> function includes a special feature that
allows you to highlight specific lines by adjusting their opacity. For
instance, if you want to highlight the line representing trust levels in
Institution A, start by setting <code>transparency = TRUE</code>. Then,
use the <code>transparencies</code> parameter to pass a named vector
specifying the opacity levels for each line. Ensure the named vector
uses the same values as the color vector (<code>cvec</code>) to align
opacities with the corresponding lines.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_lines.html">wjp_lines</a></span><span class="op">(</span></span>
<span>    <span class="va">data4lines</span>,                    </span>
<span>    target         <span class="op">=</span> <span class="st">"percentage"</span>,             </span>
<span>    grouping       <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    ngroups        <span class="op">=</span> <span class="va">data4lines</span><span class="op">$</span><span class="va">institution</span>,                 </span>
<span>    colors         <span class="op">=</span> <span class="st">"institution"</span>,</span>
<span>    cvec           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Institution A"</span> <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                       <span class="st">"Institution B"</span> <span class="op">=</span> <span class="st">"#9E6240"</span>,</span>
<span>                       <span class="st">"Institution C"</span> <span class="op">=</span> <span class="st">"#2E0E02"</span><span class="op">)</span>,</span>
<span>    labels         <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    repel          <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    transparency   <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    transparencies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Institution A"</span> <span class="op">=</span> <span class="fl">1.00</span>,</span>
<span>                       <span class="st">"Institution B"</span> <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>                       <span class="st">"Institution C"</span> <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-16-1.png" width="150%"></p>
</div>
</div>
<div class="section level2">
<h2 id="slope-chart">Slope Chart<a class="anchor" aria-label="anchor" href="#slope-chart"></a>
</h2>
<p>Slope charts are a great choice for visualizing the evolution of
variables between two specific points in time. They provide a more
aesthetically pleasing alternative to line charts in such cases. The
<code><a href="../reference/wjp_slope.html">wjp_slope()</a></code> function is designed for this purpose.</p>
<p>Let’s use an example where we disaggregate the evolution of trust in
Institution A between 2017 and 2022 across three countries. We begin by
preparing the data to fit this design:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4slopes</span> <span class="op">&lt;-</span> <span class="va">gpp_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">gend</span>, <span class="va">q1a</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2017</span>, <span class="fl">2019</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    q1a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="va">q1a</span><span class="op">)</span>,</span>
<span>    trust <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">q1a</span> <span class="op">&lt;=</span> <span class="fl">2</span>  <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">q1a</span> <span class="op">&lt;=</span> <span class="fl">4</span>  <span class="op">~</span> <span class="fl">0</span></span>
<span>    <span class="op">)</span>,</span>
<span>    gender <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">gend</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Male"</span>,</span>
<span>      <span class="va">gend</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Female"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    trust <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">trust</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"keep"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    value_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">trust</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>        nsmall <span class="op">=</span> <span class="fl">0</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="st">"%"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="va">data4slopes</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
gender
</th>
<th style="text-align:right;">
trust
</th>
<th style="text-align:left;">
value_label
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:right;">
60.00000
</td>
<td style="text-align:left;">
60%
</td>
</tr>
<tr>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:right;">
58.59873
</td>
<td style="text-align:left;">
59%
</td>
</tr>
<tr>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:right;">
65.90909
</td>
<td style="text-align:left;">
66%
</td>
</tr>
<tr>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:right;">
63.46154
</td>
<td style="text-align:left;">
63%
</td>
</tr>
</tbody>
</table>
<p>Once the data is ready, we can use the wjp_slope() function. This
function relies on parameters that have been covered in previous
examples:</p>
<ul>
<li>
<code>target</code>: Specifies the column containing the values to
be plotted on the Y-axis.</li>
<li>
<code>grouping</code>: Specifies the column containing the
categorical groupings. For slope charts, this usually refers to the time
variable or year.</li>
<li>
<code>colors</code>: Specifies the column used to distinguish
different colors in the slope chart.</li>
<li>
<code>cvec</code>: Contains a named vector mapping specific values
to their corresponding color codes.</li>
<li>
<code>labels</code>: Specifies the column containing value labels to
display, if any.</li>
<li>
<code>ngroups</code>: Defines the number of lines to be plotted. For
a single line, set <code>ngroups = 1</code>. For multiple lines, pass
the column containing the group identifiers.</li>
<li>
<code>repel</code>: Activates the <code>ggrepel</code> feature to
prevent overlapping labels. Note that the <code>ggrepel</code> package
must be loaded for this feature to work.</li>
</ul>
<p>Using these parameters, you can create a slope chart that effectively
highlights changes between two points in time while maintaining clarity
and visual appeal.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_slope.html">wjp_slope</a></span><span class="op">(</span></span>
<span>    <span class="va">data4slopes</span>,                    </span>
<span>    target    <span class="op">=</span> <span class="st">"trust"</span>,             </span>
<span>    grouping  <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    ngroups   <span class="op">=</span> <span class="va">data4slopes</span><span class="op">$</span><span class="va">gender</span>,                 </span>
<span>    labels    <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    colors    <span class="op">=</span> <span class="st">"gender"</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>   <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                  <span class="st">"Female"</span> <span class="op">=</span> <span class="st">"#9E6240"</span><span class="op">)</span>,</span>
<span>    repel     <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-18-1.png" width="150%"></p>
</div>
<div class="section level2">
<h2 id="dots-chart">Dots Chart<a class="anchor" aria-label="anchor" href="#dots-chart"></a>
</h2>
<div class="section level3">
<h3 id="minimal-example">Minimal Example<a class="anchor" aria-label="anchor" href="#minimal-example"></a>
</h3>
<p>Dot charts are an excellent option for displaying multiple variables
and comparing results across different agents, regions, or categories.
The <code><a href="../reference/wjp_dots.html">wjp_dots()</a></code> function allows you to create dot charts
efficiently and effectively.</p>
<p>Let’s walk through an example where we plot the percentage of people
who have “a lot” or “some” trust in Institutions A, B, C, and D across
three countries: Atlantis, Narnia, and Neverland. To start, we need to
prepare our data for this minimal example as follows:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4dots</span> <span class="op">&lt;-</span> <span class="va">gpp_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">q1a</span>, <span class="va">q1b</span>, <span class="va">q1c</span>, <span class="va">q1d</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="op">!</span><span class="va">country</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>        <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">2</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>        <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">4</span> <span class="op">~</span> <span class="fl">0</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span></span>
<span>    <span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"keep"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="va">country</span>,</span>
<span>    names_to  <span class="op">=</span> <span class="st">"variable"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"percentage"</span> </span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    institution <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1a"</span> <span class="op">~</span> <span class="st">"Institution A"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1b"</span> <span class="op">~</span> <span class="st">"Institution B"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1c"</span> <span class="op">~</span> <span class="st">"Institution C"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1d"</span> <span class="op">~</span> <span class="st">"Institution D"</span>,</span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="va">data4dots</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
variable
</th>
<th style="text-align:right;">
percentage
</th>
<th style="text-align:left;">
institution
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
59.75610
</td>
<td style="text-align:left;">
Institution A
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
40.74074
</td>
<td style="text-align:left;">
Institution B
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
40.33613
</td>
<td style="text-align:left;">
Institution C
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlantis
</td>
<td style="text-align:left;">
q1d
</td>
<td style="text-align:right;">
52.65306
</td>
<td style="text-align:left;">
Institution D
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
60.88710
</td>
<td style="text-align:left;">
Institution A
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
41.86992
</td>
<td style="text-align:left;">
Institution B
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
41.80328
</td>
<td style="text-align:left;">
Institution C
</td>
</tr>
<tr>
<td style="text-align:left;">
Narnia
</td>
<td style="text-align:left;">
q1d
</td>
<td style="text-align:right;">
49.20000
</td>
<td style="text-align:left;">
Institution D
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
58.77551
</td>
<td style="text-align:left;">
Institution A
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
40.57377
</td>
<td style="text-align:left;">
Institution B
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
39.34426
</td>
<td style="text-align:left;">
Institution C
</td>
</tr>
<tr>
<td style="text-align:left;">
Neverland
</td>
<td style="text-align:left;">
q1d
</td>
<td style="text-align:right;">
44.39834
</td>
<td style="text-align:left;">
Institution D
</td>
</tr>
</tbody>
</table>
<p>Once the data is prepared, we can use the <code><a href="../reference/wjp_dots.html">wjp_dots()</a></code>
function to create the dot chart. The required parameters for this
function are consistent with those explained in earlier sections:</p>
<ul>
<li>
<code>target</code>: The column name containing the values to be
plotted as dots.</li>
<li>
<code>grouping</code>: The column name containing the categorical
groupings (e.g., institutions or categories being compared).</li>
<li>
<code>colors</code>: The column name used to assign different colors
to the dots.</li>
<li>
<code>cvec</code>: A named vector linking specific values to their
corresponding color codes.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_dots.html">wjp_dots</a></span><span class="op">(</span></span>
<span>    <span class="va">data4dots</span>,             </span>
<span>    target      <span class="op">=</span> <span class="st">"percentage"</span>,</span>
<span>    grouping    <span class="op">=</span> <span class="st">"institution"</span>,  </span>
<span>    colors      <span class="op">=</span> <span class="st">"country"</span>,  </span>
<span>    cvec        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                    <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="st">"#9E6240"</span>,</span>
<span>                    <span class="st">"Neverland"</span> <span class="op">=</span> <span class="st">"#2E0E02"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-20-1.png" width="150%"></p>
</div>
<div class="section level3">
<h3 id="controlling-opacities-and-shapes">Controlling opacities and shapes<a class="anchor" aria-label="anchor" href="#controlling-opacities-and-shapes"></a>
</h3>
<p>A special feature of the <code><a href="../reference/wjp_dots.html">wjp_dots()</a></code> is that it allows
you to apply a special highlight to certain data points through the
manipulation of shapes and opacities. For this, we begin by setting the
<code>diffOpac</code> and the <code>diffShp</code> parameters to TRUE.
Then, we proceed to pass a named vector with the specific values of
opacities and the desired symbol codes. The control of these traits
works on the same values passed as through the <code>colors</code> and
<code>cvec</code> parameters. To check the symbol codes used in ggplot,
you can read the <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html#sec:shape-spec" class="external-link">ggplot2
documentation</a>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_dots.html">wjp_dots</a></span><span class="op">(</span></span>
<span>    <span class="va">data4dots</span>,             </span>
<span>    target      <span class="op">=</span> <span class="st">"percentage"</span>,</span>
<span>    grouping    <span class="op">=</span> <span class="st">"institution"</span>,  </span>
<span>    colors      <span class="op">=</span> <span class="st">"country"</span>,  </span>
<span>    cvec        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                    <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="st">"#9E6240"</span>,</span>
<span>                    <span class="st">"Neverland"</span> <span class="op">=</span> <span class="st">"#2E0E02"</span><span class="op">)</span>,</span>
<span>    diffOpac    <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    opacities   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>                    <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="fl">1.0</span>,</span>
<span>                    <span class="st">"Neverland"</span> <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>    diffShp     <span class="op">=</span> <span class="cn">TRUE</span>,     </span>
<span>    shapes      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="fl">15</span>,</span>
<span>                    <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                    <span class="st">"Neverland"</span> <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-21-1.png" width="150%"></p>
</div>
<div class="section level3">
<h3 id="adding-confidence-intervals">Adding confidence intervals<a class="anchor" aria-label="anchor" href="#adding-confidence-intervals"></a>
</h3>
<p>The <code><a href="../reference/wjp_dots.html">wjp_dots()</a></code> function has a special feature that
allows us to add confidence intervals to the plotted data points. This
comes very handy when we want to visualize if two data points are
statistically different from each other. Let’s assume that we want to
know if the trust levels in Institution A, B, C, and D, are
statistically different between males and females in our sample. For
this, we first need to plot our data a little bit different given that,
besides the data point (mean), we will also require the standard
deviation and the sample size for each group and variable.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4dots_errorbars</span> <span class="op">&lt;-</span> <span class="va">gpp_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">gend</span>, <span class="va">q1a</span>, <span class="va">q1b</span>, <span class="va">q1c</span>, <span class="va">q1d</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    gend <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">gend</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Male"</span>,</span>
<span>      <span class="va">gend</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Female"</span>,</span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="op">!</span><span class="va">gend</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>        <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">2</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>        <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">4</span> <span class="op">~</span> <span class="fl">0</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">gend</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">q1a</span>, <span class="va">q1b</span>, <span class="va">q1c</span>, <span class="va">q1d</span><span class="op">)</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,</span>
<span>      .names <span class="op">=</span> <span class="st">"{col}_mean"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">q1a</span>, <span class="va">q1b</span>, <span class="va">q1c</span>, <span class="va">q1d</span><span class="op">)</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      .names <span class="op">=</span> <span class="st">"{col}_n"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">q1a</span>, <span class="va">q1b</span>, <span class="va">q1c</span>, <span class="va">q1d</span><span class="op">)</span>,</span>
<span>      \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,</span>
<span>      .names <span class="op">=</span> <span class="st">"{col}_sd"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"keep"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="va">gend</span>,</span>
<span>    names_to      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"variable"</span>, <span class="st">"stat"</span><span class="op">)</span>, </span>
<span>    names_pattern <span class="op">=</span> <span class="st">"(.*)_(.*)"</span>,</span>
<span>    values_to     <span class="op">=</span> <span class="st">"value"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    names_from  <span class="op">=</span> <span class="st">"stat"</span>,</span>
<span>    values_from <span class="op">=</span> <span class="st">"value"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    institution <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1a"</span> <span class="op">~</span> <span class="st">"Institution A"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1b"</span> <span class="op">~</span> <span class="st">"Institution B"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1c"</span> <span class="op">~</span> <span class="st">"Institution C"</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1d"</span> <span class="op">~</span> <span class="st">"Institution D"</span>,</span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="va">data4dots_errorbars</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
gend
</th>
<th style="text-align:left;">
variable
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:left;">
institution
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
59.90099
</td>
<td style="text-align:right;">
404
</td>
<td style="text-align:right;">
49.07067
</td>
<td style="text-align:left;">
Institution A
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
40.60150
</td>
<td style="text-align:right;">
399
</td>
<td style="text-align:right;">
49.17039
</td>
<td style="text-align:left;">
Institution B
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
43.35840
</td>
<td style="text-align:right;">
399
</td>
<td style="text-align:right;">
49.61915
</td>
<td style="text-align:left;">
Institution C
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
q1d
</td>
<td style="text-align:right;">
50.86849
</td>
<td style="text-align:right;">
403
</td>
<td style="text-align:right;">
50.05460
</td>
<td style="text-align:left;">
Institution D
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
q1a
</td>
<td style="text-align:right;">
59.70149
</td>
<td style="text-align:right;">
335
</td>
<td style="text-align:right;">
49.12315
</td>
<td style="text-align:left;">
Institution A
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
q1b
</td>
<td style="text-align:right;">
41.61677
</td>
<td style="text-align:right;">
334
</td>
<td style="text-align:right;">
49.36616
</td>
<td style="text-align:left;">
Institution B
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
q1c
</td>
<td style="text-align:right;">
37.00306
</td>
<td style="text-align:right;">
327
</td>
<td style="text-align:right;">
48.35525
</td>
<td style="text-align:left;">
Institution C
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
q1d
</td>
<td style="text-align:right;">
46.24625
</td>
<td style="text-align:right;">
333
</td>
<td style="text-align:right;">
49.93393
</td>
<td style="text-align:left;">
Institution D
</td>
</tr>
</tbody>
</table>
<p>Once that we have the data ready. We make use of the
<code><a href="../reference/wjp_dots.html">wjp_dots()</a></code> function and we set <code>draw_ci = TRUE</code>
inside the function call. Additionally, we also need to specify the
<code>sd</code> and <code>sample_size</code> parameters, which are the
column names that contain the standard deviation and the sample size for
each variable and group.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wjp_dots.html">wjp_dots</a></span><span class="op">(</span></span>
<span>    <span class="va">data4dots_errorbars</span>,             </span>
<span>    target      <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>    grouping    <span class="op">=</span> <span class="st">"institution"</span>,  </span>
<span>    colors      <span class="op">=</span> <span class="st">"gend"</span>,  </span>
<span>    cvec        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>   <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                    <span class="st">"Female"</span> <span class="op">=</span> <span class="st">"#9E6240"</span><span class="op">)</span>,</span>
<span>    draw_ci     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    sd          <span class="op">=</span> <span class="st">"sd"</span>,</span>
<span>    sample_size <span class="op">=</span> <span class="st">"n"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-23-1.png" width="150%"></p>
</div>
</div>
<div class="section level2">
<h2 id="dumbbells">Dumbbells<a class="anchor" aria-label="anchor" href="#dumbbells"></a>
</h2>
<p>Dumbbells are a good option when we want to focus on two different
points in time for multiple variables. The <code>wjp_dumbbells</code>
function is used to plot dumbbells for this purpose. We can use the data
that we used for plotting our line chart above and just filtering for
two points in time. Once we have the data we can apply the
<code><a href="../reference/wjp_dumbbells.html">wjp_dumbbells()</a></code> function as usual with the parameters that
we have reviewed in previous sections:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4dumbbells</span> <span class="op">&lt;-</span> <span class="va">data4lines</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2017"</span>, <span class="st">"2022"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="../reference/wjp_dumbbells.html">wjp_dumbbells</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data4dumbbells</span>,</span>
<span>    target    <span class="op">=</span> <span class="st">"percentage"</span>,</span>
<span>    grouping  <span class="op">=</span> <span class="st">"institution"</span>,</span>
<span>    color     <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2017"</span> <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                  <span class="st">"2022"</span> <span class="op">=</span> <span class="st">"#9E6240"</span><span class="op">)</span>,</span>
<span>    cgroups   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2017"</span>, <span class="st">"2022"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-24-1.png" width="150%"></p>
<p>Adding value labels to a dumbbell chart is as easy as specifying the
column names that have the value label (<code>labels</code>) and the
label position (<code>labpos</code>) to the plotting function.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4dumbbells</span> <span class="op">&lt;-</span> <span class="va">data4dumbbells</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    lab_position <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="st">"2022"</span>, <span class="va">percentage</span><span class="op">-</span><span class="fl">5</span>, <span class="va">percentage</span><span class="op">+</span><span class="fl">5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wjp_dumbbells.html">wjp_dumbbells</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data4dumbbells</span>,</span>
<span>    target    <span class="op">=</span> <span class="st">"percentage"</span>,</span>
<span>    grouping  <span class="op">=</span> <span class="st">"institution"</span>,</span>
<span>    color     <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    cgroups   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2017"</span>, <span class="st">"2022"</span><span class="op">)</span>,</span>
<span>    cvec      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2017"</span> <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                  <span class="st">"2022"</span> <span class="op">=</span> <span class="st">"#9E6240"</span><span class="op">)</span>,</span>
<span>    labels    <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    labpos    <span class="op">=</span> <span class="st">"lab_position"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-25-1.png" width="150%"></p>
</div>
<div class="section level2">
<h2 id="radar-chart">Radar Chart<a class="anchor" aria-label="anchor" href="#radar-chart"></a>
</h2>
</div>
<div class="section level2">
<h2 id="rose-chart">Rose Chart<a class="anchor" aria-label="anchor" href="#rose-chart"></a>
</h2>
</div>
<div class="section level2">
<h2 id="edgebars-chart">Edgebars Chart<a class="anchor" aria-label="anchor" href="#edgebars-chart"></a>
</h2>
</div>
<div class="section level2">
<h2 id="gauge-chart">Gauge Chart<a class="anchor" aria-label="anchor" href="#gauge-chart"></a>
</h2>
</div>
<div class="section level2">
<h2 id="controlling-the-order-of-elements">Controlling the order of elements<a class="anchor" aria-label="anchor" href="#controlling-the-order-of-elements"></a>
</h2>
<p>Sometimes, we might want to control the order in which we show some
elements in our charts. Some of the plotting functions in our WJPr
package include the a <code>custom_order</code> and an
<code>order</code> parameter. Let’s say that we want to further
customize the diverging bars that we showed above and present the bars
following in a specific order: Neverland (1), Atlantis (2), and Narnia
(3). For this, we begin by setting the <code>custom_order</code> to TRUE
and adding a new column to our data that has the specific order of the
elements:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4divbars</span> <span class="op">&lt;-</span> <span class="va">data4divbars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    order_no <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">country</span> <span class="op">==</span> <span class="st">"Neverland"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">country</span> <span class="op">==</span> <span class="st">"Atlantis"</span>  <span class="op">~</span> <span class="fl">2</span>,</span>
<span>      <span class="va">country</span> <span class="op">==</span> <span class="st">"Narnia"</span>    <span class="op">~</span> <span class="fl">3</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wjp_divbars.html">wjp_divbars</a></span><span class="op">(</span></span>
<span>    <span class="va">data4divbars</span>,             </span>
<span>    target       <span class="op">=</span> <span class="st">"percentage"</span>,       </span>
<span>    grouping     <span class="op">=</span> <span class="st">"country"</span>,         </span>
<span>    diverging    <span class="op">=</span> <span class="st">"q1a"</span>,     </span>
<span>    negative     <span class="op">=</span> <span class="st">"negative"</span>,   </span>
<span>    cvec         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Trust"</span>     <span class="op">=</span> <span class="st">"#4F518C"</span>,</span>
<span>                     <span class="st">"No Trust"</span>  <span class="op">=</span> <span class="st">"#2C2A4A"</span><span class="op">)</span>,</span>
<span>    labels       <span class="op">=</span> <span class="st">"value_label"</span>,</span>
<span>    custom_order <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    order        <span class="op">=</span> <span class="st">"order_no"</span> </span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-26-1.png" width="150%"></p>
<p>Same can be done when working with dot charts:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data4dots</span> <span class="op">&lt;-</span> <span class="va">data4dots</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    order_no <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1c"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1b"</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1d"</span> <span class="op">~</span> <span class="fl">3</span>,</span>
<span>      <span class="va">variable</span> <span class="op">==</span> <span class="st">"q1a"</span> <span class="op">~</span> <span class="fl">4</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wjp_dots.html">wjp_dots</a></span><span class="op">(</span></span>
<span>    <span class="va">data4dots</span>,             </span>
<span>    target      <span class="op">=</span> <span class="st">"percentage"</span>,</span>
<span>    grouping    <span class="op">=</span> <span class="st">"institution"</span>,  </span>
<span>    colors      <span class="op">=</span> <span class="st">"country"</span>,  </span>
<span>    cvec        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atlantis"</span>  <span class="op">=</span> <span class="st">"#08605F"</span>,</span>
<span>                    <span class="st">"Narnia"</span>    <span class="op">=</span> <span class="st">"#9E6240"</span>,</span>
<span>                    <span class="st">"Neverland"</span> <span class="op">=</span> <span class="st">"#2E0E02"</span><span class="op">)</span>,</span>
<span>    order       <span class="op">=</span> <span class="st">"order_no"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-27-1.png" width="150%"></p>
</div>
<div class="section level2">
<h2 id="adding-more-customizations">Adding more customizations<a class="anchor" aria-label="anchor" href="#adding-more-customizations"></a>
</h2>
<p>All the plotting functions from the WJPr package return a ggplot
object. This means that, with a further knowledge of ggplot, the user
can further customize the plot returned by the plotting function. For
example, let’s say that we want to further customize our stacked bars
from before and completely remove the panel grid and add some title and
subtitle to it. We can do it by using the <code><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs()</a></code> and
<code><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme()</a></code> functions from the ggplot2 package as shown
bellow:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stacked_bar</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title    <span class="op">=</span> <span class="st">"Trust in Institution A"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Percentage of people who has a lot, some, little, or no trust in Institution A"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    axis.text.x         <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.major.x  <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>    plot.subtitle       <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> </span></code></pre></div>
<p><img src="dataviz_files/figure-html/unnamed-chunk-28-1.png" width="150%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Carlos A. Toruno Paniagua.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
